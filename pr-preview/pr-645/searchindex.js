Search.setIndex({"docnames": ["C2SMGuidelines", "InstanceManagement", "QuickStart", "SpackChoice", "SpackCommands", "Testing", "index"], "filenames": ["C2SMGuidelines.rst", "InstanceManagement.rst", "QuickStart.rst", "SpackChoice.rst", "SpackCommands.rst", "Testing.rst", "index.rst"], "titles": ["C2SM Guidelines for Spack", "How to manage your own Spack instance", "Quick Start", "Why was spack chosen by MeteoSwiss?", "Important Spack Commands", "Testing", "Welcome to C2SM Spack Documentation!"], "terms": {"enabl": 0, "user": [0, 1, 3, 4], "piec": 0, "softwar": [0, 1, 3, 4, 6], "veri": [0, 3], "friendli": 0, "wai": [0, 4, 5], "allow": [0, 4], "e": [0, 1, 2, 3, 4], "g": [0, 2, 3], "differ": [0, 3], "version": [0, 1, 2, 3, 4, 5], "specif": [0, 1, 3, 4], "same": [0, 2, 3], "simultan": 0, "without": 0, "have": [0, 1, 3, 4], "manual": [0, 4], "download": [0, 1], "sourc": [0, 1, 4], "code": [0, 4], "thi": [0, 1, 2, 3, 4, 5], "come": [0, 1, 3], "expens": 0, "potenti": 0, "lose": 0, "control": 0, "over": 0, "exact": 0, "being": [0, 4], "That": [0, 2, 4], "": [0, 2, 3, 4], "why": [0, 6], "came": [0, 3], "up": [0, 2, 3], "follow": [0, 3, 4], "your": [0, 2, 3, 4, 5, 6], "librari": [0, 3], "execut": [0, 1, 2, 4], "There": [0, 1, 3, 4], "ar": [0, 1, 2, 3, 4], "two": 0, "possibl": [0, 3, 4], "both": 0, "them": [0, 2, 3], "fine": 0, "some": [0, 3, 4], "specialti": 0, "one": [0, 3, 4], "need": [0, 1, 2, 3, 4], "take": 0, "account": [0, 3], "everi": 0, "suffix": 0, "i": [0, 1, 2, 3, 4, 5, 6], "can": [0, 2, 3, 4, 5], "mean": [0, 3, 5], "branch": 0, "git": [0, 1, 2, 4, 5], "repositori": [0, 1, 2], "out": [0, 3], "sever": 0, "defin": [0, 1, 4], "specifc": 0, "tag": [0, 2], "correspond": [0, 4], "hash": [0, 4], "hardcod": 0, "onli": [0, 1, 2, 3, 4], "last": 0, "item": 0, "list": [0, 2, 5, 6], "abov": [0, 2, 3], "you": [0, 1, 2, 3, 4, 5], "alwai": [0, 4], "fetch": [0, 4], "compil": [0, 1, 2, 3, 4], "The": [0, 1, 2, 3, 4], "other": [0, 3, 4], "lead": 0, "case": [0, 3, 4], "head": [0, 4], "got": 0, "addit": [0, 4], "commit": 0, "meantim": 0, "especi": [0, 4], "product": [0, 1, 4], "import": [0, 3, 6], "now": 0, "which": [0, 1, 3, 4], "actual": [0, 4], "us": [0, 1, 3, 4, 5, 6], "varieti": 0, "cosmo": [0, 3, 4, 5, 6], "ssh": 0, "github": [0, 1, 2, 6], "com": [0, 1, 2, 5], "org": [0, 2], "apngit": 0, "meteoswiss": [0, 2, 6], "apn": [0, 2], "c2smgit": 0, "rcm": 0, "master": [0, 2, 4], "get_full_repo": 0, "true": 0, "mch": [0, 1, 3, 4], "featur": [0, 1, 4], "5": [0, 2, 3, 4], "09": 0, "three": 0, "avail": [0, 1, 4], "It": [0, 1, 2, 3, 4, 5], "clear": 0, "result": 0, "all": [0, 1, 2, 3, 4, 5], "point": [0, 3, 4], "includ": [0, 3], "provid": [0, 3], "info": [0, 1, 2, 6], "package_nam": 0, "note": 0, "yet": 0, "offer": 0, "soon": 0, "we": [0, 2, 3, 4], "thu": 0, "recommend": [0, 1, 4], "devbuildcosmo": [0, 2, 6], "command": [0, 2, 6], "so": [0, 3, 4], "long": [0, 4], "stori": 0, "short": 0, "valid": 0, "when": [0, 2, 3, 4], "In": [0, 4], "order": [0, 4, 5], "local": [0, 4, 6], "present": [0, 3], "contrari": 0, "v2": 0, "7": 0, "9": [0, 4], "etc": [0, 1, 3], "doe": [0, 1, 4], "ani": [0, 1, 2, 3, 4], "effect": 0, "To": [0, 1, 2, 3, 5], "safe": [0, 1], "mdev": 0, "copi": [0, 4], "after": [0, 1, 4], "folder": [0, 2, 4, 5], "store": [0, 1], "locat": [0, 1, 2, 6], "properli": 0, "abl": [0, 3, 4], "manag": [0, 3, 6], "mani": [0, 3], "configur": [0, 2, 3, 4], "along": [0, 4], "binari": [0, 4], "current": [0, 2, 4], "shell": [0, 2], "variant": [0, 2, 4, 5], "ha": [0, 2, 3], "correct": 0, "print": [0, 2, 4], "requir": [0, 1, 2, 3, 4], "file": [0, 4, 6], "later": 0, "stage": [0, 4], "sh": [0, 1, 2, 5], "run_packag": 0, "env": [0, 1, 2, 5, 6], "an": [0, 1, 2, 3, 4], "exampl": [0, 2, 4, 5], "output": [0, 4], "could": [0, 3], "look": 0, "export": 0, "library_path": 0, "opt": 0, "crai": 0, "pe": 0, "mpt": 0, "15": 0, "gni": 0, "mpich": 0, "pgi": [0, 4], "20": 0, "1": [0, 1, 2, 3, 4, 5], "lib": 0, "project": [0, 1, 4], "s903": 0, "juckerj": 0, "daint": [0, 1, 3, 5, 6], "eccod": [0, 4], "2": [0, 2, 3, 4], "19": [0, 4], "0": [0, 4], "ccigv3uvkdl5h3d2jtb6blxvvv4qsdpc": 0, "lib64": 0, "app": 0, "ue": 0, "xalt": 0, "xalt2": 0, "8": [0, 4], "10": 0, "ld_library_path": [0, 4], "gcc": [0, 2, 4], "papi": 0, "6": 0, "4": 0, "job": [0, 4], "1_2": 0, "86__g36b56f4": 0, "ari": 0, "grib_samples_path": 0, "definit": [0, 4], "egf6fp466u2cl3ckkmhpemzf4hz7loqr": 0, "cosmodefinit": 0, "sampl": 0, "grib_definition_path": 0, "share": 0, "prior": [0, 4], "rather": 0, "tailor": 0, "interac": 0, "instanc": [0, 2, 4, 6], "like": [0, 1, 3, 4], "find": [0, 1, 2, 6], "complain": 0, "about": [0, 1, 2, 3], "spec": [0, 2, 6], "meet": 0, "line": [0, 2], "input": [0, 4], "For": [0, 4], "reason": [0, 2, 3], "avoid": [0, 4], "shouldn": 0, "t": [0, 1, 2, 3, 4], "too": 0, "problemat": 0, "advis": 0, "from": [0, 1, 3, 4], "login": 0, "node": 0, "befor": [0, 1, 2, 4], "submit": 0, "inherit": 0, "submiss": 0, "time": [0, 2, 3], "respons": 1, "instead": [1, 4], "reli": 1, "instal": [1, 2, 3, 5, 6], "c2sm": [1, 2, 4], "main": [1, 3], "advantag": 1, "won": 1, "chang": [1, 4], "unless": 1, "thei": [1, 3], "activ": [1, 2], "decid": [1, 4], "pull": [1, 6], "upstream": 1, "therefor": [1, 2, 4], "workflow": 1, "interupt": 1, "dure": [1, 4], "phase": [1, 2, 4], "But": [1, 3], "more": [1, 4], "power": 1, "page": [1, 3, 6], "collect": 1, "best": [1, 3], "practic": 1, "reliabl": 1, "get": [1, 2, 3, 4], "clone": [1, 2, 4, 5], "its": [1, 2, 3, 4], "submodul": [1, 2, 5], "depth": [1, 2, 5], "shallow": [1, 2, 5], "option": [1, 2, 3], "reduc": 1, "amount": 1, "data": 1, "recurs": [1, 2, 5], "b": [1, 2, 5], "dev_v0": [1, 2, 5], "18": [1, 2, 5], "http": [1, 2, 3, 5], "At": [1, 6], "csc": [1, 3, 6], "setup": [1, 2, 5], "automat": [1, 3], "detect": [1, 2, 4], "machin": [1, 3, 5, 6], "mai": [1, 2, 3], "simpli": 1, "NOT": 1, "undergo": 1, "regular": 1, "cleanup": 1, "On": 1, "piz": 1, "scratch": [1, 4], "enforc": 1, "delet": [1, 4], "older": [1, 4], "than": 1, "30": 1, "dai": 1, "corrupt": 1, "xyz": 1, "safer": 1, "latest": 1, "upgrad": 1, "packag": [1, 3, 4, 6], "afterward": 1, "see": [1, 2, 3, 4], "below": [1, 4], "empti": 1, "cach": 1, "uninstal": [1, 4], "everyth": 1, "remov": [1, 4], "misc": 1, "rm": 1, "rf": 1, "set": [1, 2, 3, 4], "yaml": [1, 4], "thing": 1, "modul": [1, 4, 6], "preinstal": [1, 2], "under": [1, 4], "Their": 1, "structur": [1, 4], "flag": 1, "load": [1, 2, 6], "prgenv": 1, "alreadi": [1, 4], "depend": [1, 3, 4], "name": [1, 2, 3, 5], "path": [1, 2, 4], "variabl": [1, 2], "should": [1, 2, 3], "onc": [1, 4], "specifi": [1, 4], "where": [1, 4], "thebinari": 1, "pre": 1, "g110": [1, 4], "repo": [1, 5], "spack": 2, "auto": 2, "forc": [2, 4], "argument": 2, "match": [2, 4], "sysconfig": 2, "probabl": [2, 3], "want": [2, 3, 4], "extern": 2, "inform": [2, 4], "queri": 2, "icon": [2, 5], "what": [2, 4], "would": [2, 4], "ask": 2, "ocean": 2, "unspecfi": 2, "concret": [2, 4], "valu": 2, "isn": [2, 3], "default": [2, 4], "unspecifi": 2, "serv": 2, "tiebreak": 2, "dir": 2, "satisfi": 2, "restrict": 2, "run": [2, 4, 6], "assum": 2, "familiar": 2, "build": [2, 3, 5, 6], "system": [2, 3], "reccomend": 2, "test": [2, 4, 6], "done": [2, 3], "dev": [2, 5, 6], "stop": [2, 4], "bash": [2, 3, 4], "nest": 2, "var": 2, "work": [2, 3, 4], "make": [2, 3], "infrastructur": 2, "exit": 2, "If": [2, 3, 4], "multipl": [2, 3, 4], "label": 2, "separ": 2, "identifi": [2, 4], "common": [2, 3, 5], "document": [2, 4], "string": 2, "sit": 2, "p": [2, 4], "env_nam": 2, "deactiv": 2, "most": [2, 3, 4], "sensit": 2, "doc": 2, "treat": 2, "special": 2, "own": [2, 3, 4, 6], "depencendi": 2, "c": [2, 4], "dycor": [2, 4], "live": 2, "installcosmo": [2, 6], "cd": [2, 4, 6], "cosmo_target": [2, 4], "cpu": [2, 4], "gpu": [2, 3, 4], "apn_5": [2, 4], "09a": [2, 4], "mch1": [2, 4], "p1": [2, 4], "releas": 2, "question": 3, "try": 3, "answer": 3, "here": 3, "well": 3, "my": 3, "incomplet": 3, "hopefulli": 3, "give": 3, "decent": 3, "view": 3, "whole": 3, "topic": 3, "issu": 3, "hefti": 3, "just": [3, 4], "few": 3, "linux": [3, 4], "distribut": 3, "offici": [3, 4], "support": [3, 5], "re": 3, "mostli": [3, 6], "hardwar": 3, "matter": 3, "our": [3, 4, 6], "due": [3, 4], "perform": [3, 4], "mpi": 3, "implement": 3, "model": 3, "problem": [3, 4], "creat": [3, 4, 5, 6], "isol": 3, "environ": [3, 4, 6], "quit": 3, "tricki": 3, "deal": 3, "part": 3, "process": 3, "edit": [3, 6], "makefil": 3, "usual": 3, "autom": 3, "someth": 3, "regex": 3, "believ": 3, "often": 3, "lot": 3, "hpc": 3, "aren": 3, "don": [3, 4], "realli": 3, "script": [3, 6], "tri": 3, "becam": 3, "difficult": 3, "maintain": 3, "also": [3, 4, 5], "develop": [3, 4, 5, 6], "possibli": 3, "hack": 3, "clean": [3, 4, 6], "enough": 3, "hackabl": 3, "relev": 3, "acceler": 3, "alon": 3, "tsa": [3, 4, 5, 6], "kesch": 3, "collabor": 3, "These": 3, "rule": 3, "popular": 3, "solut": 3, "apt": 3, "pacman": 3, "rpm": 3, "still": 3, "left": 3, "fullfil": 3, "those": 3, "far": 3, "biggest": 3, "adopt": 3, "within": 3, "googl": 3, "first": [3, 4], "domin": 3, "u": [3, 4], "depart": 3, "energi": 3, "aurora": 3, "exaflop": 3, "frontier": 3, "el": 3, "capitan": 3, "riken": 3, "fugaku": 3, "cern": 3, "epfl": 3, "fermilab": 3, "ch": 3, "comput": [3, 6], "strong": 3, "apart": 3, "viabl": 3, "sens": 3, "rest": 3, "industri": 3, "A": 3, "comparison": 3, "variou": 3, "tool": 3, "found": 3, "timelin": 3, "roughli": 3, "sometim": 3, "2018": 3, "valentin": 3, "hann": 3, "gave": 3, "summer": 3, "2019": 3, "evalu": 3, "determin": [3, 4], "similar": [3, 4], "novemb": 3, "elsa": 3, "start": [3, 6], "her": 3, "devop": 3, "internship": 3, "until": [3, 4], "2020": 3, "were": 3, "port": 3, "septemb": 3, "octob": 3, "migrat": 3, "happen": 3, "Of": 3, "cours": 3, "regularli": 3, "consum": 3, "frustrat": 3, "howev": [3, 4], "hard": 3, "while": 3, "encount": 3, "bug": 3, "awai": 3, "optim": 3, "unavoid": 3, "expect": [3, 4], "solv": 3, "unsolv": 3, "misus": 3, "fair": 3, "blame": 3, "becaus": 3, "complex": [3, 4], "contain": [3, 4, 6], "bit": 3, "itself": 3, "willing": 3, "learn": 3, "ensur": 3, "right": 3, "bad": 3, "idea": 3, "magic": 3, "unfortun": 3, "realist": 3, "good": 3, "search": [4, 6], "v": 4, "rhel7": 4, "skylake_avx512": 4, "3": 4, "claw": 4, "cppdycor": 4, "debug": 4, "dycoretest": 4, "parallel": 4, "pollen": 4, "real_typ": 4, "doubl": 4, "serial": 4, "slave": 4, "verbos": 4, "float": 4, "07": 4, "p6": 4, "show": [4, 5], "directori": 4, "raw": 4, "format": 4, "prefix": 4, "p2": 4, "qh4lqyvz73zcm2emfwwhcfue6kkm3xyo": 4, "ssezzpu36dc4j5lc35rkytuieicoptfr": 4, "4h7b7x62dcpvrctghjv23jrpnkep4ela": 4, "6ijz5756a65p6wblxbr3enllmpdzcvh5": 4, "us5kk56wraktww7e543cxi4dbud2lalv": 4, "o3jtuao2gwrz7uwyekvxvr7ylltwnt4w": 4, "aejk4rps3es6o5trdwppzew3f2j37kl6": 4, "vkwywww3z52ttmlzzpn4df5jnr5paiw4": 4, "l52ikknglfrfolr462lc4ez6abulmph": 4, "bbjwypwllbba6nmkvronktzo2vt6k3dw": 4, "gnm6i4pya3lrscgdnvvzgt77bssbfcab": 4, "koaxr3hlillunjtywkh46vcpzgrarnxc": 4, "i72unz2dzlp4donztoi7kxbubj4kfqtw": 4, "rvqs2tqltwlohpkyedzwnjggtwtgu4li": 4, "i2hc4rhlhhapga6gheq3tcnbyrytadoi": 4, "kmrbrer2mlzz2rkn3ykhxr6h6glbwptn": 4, "tip": 4, "truncat": 4, "n": 4, "fill": 4, "python": 4, "usr": 4, "bin": 4, "install_dir": 4, "liner": 4, "kei": 4, "sinc": 4, "describ": 4, "target": 4, "check": 4, "how": [4, 6], "chosen": [4, 6], "plu": 4, "your_machin": 4, "config": [4, 6], "mach": 4, "section": 4, "detail": 4, "kept": 4, "add": 4, "keep": 4, "might": 4, "jenkin": [4, 5], "plan": 4, "attempt": 4, "request": [4, 6], "wa": [4, 6], "circumv": 4, "host": 4, "reserv": 4, "recip": 4, "int2lm": [4, 5], "among": 4, "termin": 4, "root": [4, 5], "top": 4, "level": 4, "skip": 4, "call": 4, "introduc": 4, "equal": 4, "overwritten": 4, "preced": 4, "testsuit": 4, "j": 4, "explicitli": 4, "number": 4, "select": 4, "mode": 4, "altern": 4, "force_uninstal": 4, "dont": 4, "restag": 4, "partial": 4, "do": [4, 5], "go": 4, "base": 4, "notic": 4, "rebuilt": 4, "next": 4, "even": 4, "anytim": 4, "certain": 4, "complet": 4, "ignor": 4, "no_specyaml": 4, "clean_build": 4, "relat": 4, "mainli": 4, "useful": 4, "access": 4, "corespond": 4, "somewher": 4, "As": 4, "state": 4, "simplest": 4, "rpath": 4, "adjust": 4, "retriev": 4, "h": 4, "dump": 4, "screen": 4, "either": 4, "sourceabl": 4, "replac": 4, "interact": 4, "programm": 4, "filenam": 4, "open": 4, "editor": 4, "correspondig": 4, "py": 4, "directli": 4, "runtim": 4, "respect": 4, "pipelin": 5, "log": 5, "error": 5, "end": 5, "comment": 5, "launch": 5, "No": 5, "irrelev": 5, "balfrin": [5, 6], "deploi": 6, "supercomput": 6, "swiss": 6, "super": 6, "center": 6, "quick": 6, "guidelin": 6, "new": 6, "updat": 6, "pr": 6, "mr": 6, "ci": 6, "index": 6}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"c2sm": [0, 5, 6], "guidelin": 0, "spack": [0, 1, 3, 4, 5, 6], "build": [0, 4], "instal": [0, 4], "dev": [0, 4], "run": 0, "load": [0, 4], "environ": [0, 2], "packag": [0, 2, 5], "script": 0, "how": 1, "manag": 1, "your": 1, "own": 1, "instanc": 1, "creat": 1, "new": 1, "updat": 1, "clean": 1, "config": 1, "file": 1, "quick": 2, "start": 2, "At": 2, "csc": 2, "daint": 2, "tsa": 2, "balfrin": 2, "local": 2, "machin": [2, 4], "contain": 2, "us": 2, "develop": 2, "cosmo": 2, "why": 3, "wa": 3, "chosen": 3, "meteoswiss": 3, "import": 4, "command": 4, "find": 4, "usag": 4, "option": 4, "process": 4, "list": 4, "info": 4, "spec": 4, "installcosmo": 4, "devbuildcosmo": 4, "locat": 4, "env": 4, "edit": 4, "test": 5, "pr": 5, "mr": 5, "ci": 5, "cd": 5, "pull": 5, "request": 5, "github": 5, "welcom": 6, "document": 6, "content": 6, "indic": 6, "tabl": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx": 57}, "alltitles": {"C2SM Guidelines for Spack": [[0, "c2sm-guidelines-for-spack"]], "Building": [[0, "building"]], "Spack install (C2SM Guidelines)": [[0, "spack-install-c2sm-guidelines"]], "Spack dev-build (C2SM Guidelines)": [[0, "spack-dev-build-c2sm-guidelines"]], "Running": [[0, "running"]], "Load run-environment of a package": [[0, "load-run-environment-of-a-package"]], "Spack in scripts": [[0, "spack-in-scripts"]], "How to manage your own Spack instance": [[1, "how-to-manage-your-own-spack-instance"]], "Create new Spack instance": [[1, "create-new-spack-instance"]], "Update Spack instance": [[1, "update-spack-instance"]], "Clean Spack instance": [[1, "clean-spack-instance"]], "Spack instance config files": [[1, "spack-instance-config-files"]], "Quick Start": [[2, "quick-start"]], "At CSCS (Daint, Tsa, Balfrin)": [[2, "at-cscs-daint-tsa-balfrin"]], "Local machines and Containers": [[2, "local-machines-and-containers"]], "Use packages": [[2, "use-packages"]], "Develop packages": [[2, "develop-packages"]], "Environments": [[2, "environments"]], "COSMO": [[2, "cosmo"]], "Why was spack chosen by MeteoSwiss?": [[3, "why-was-spack-chosen-by-meteoswiss"]], "Important Spack Commands": [[4, "important-spack-commands"]], "Spack find": [[4, "spack-find"]], "Usage (spack find)": [[4, "usage-spack-find"]], "Options (spack find)": [[4, "options-spack-find"]], "Machine processing (spack find)": [[4, "machine-processing-spack-find"]], "Spack list": [[4, "spack-list"]], "Usage (spack list)": [[4, "usage-spack-list"]], "Spack info": [[4, "spack-info"]], "Usage (spack info)": [[4, "usage-spack-info"]], "Spack spec": [[4, "spack-spec"]], "Usage (spack spec)": [[4, "usage-spack-spec"]], "Spack install": [[4, "spack-install"]], "Usage (spack install)": [[4, "usage-spack-install"]], "Options (spack install)": [[4, "options-spack-install"]], "Spack installcosmo": [[4, "spack-installcosmo"]], "Usage (spack installcosmo)": [[4, "usage-spack-installcosmo"]], "Options (spack installcosmo)": [[4, "options-spack-installcosmo"]], "Spack dev-build": [[4, "spack-dev-build"]], "Usage (spack dev-build)": [[4, "usage-spack-dev-build"]], "Options (spack dev-build)": [[4, "options-spack-dev-build"]], "Spack devbuildcosmo": [[4, "spack-devbuildcosmo"]], "Usage (spack devbuildcosmo)": [[4, "usage-spack-devbuildcosmo"]], "Options (spack devbuildcosmo)": [[4, "options-spack-devbuildcosmo"]], "Spack location": [[4, "spack-location"]], "Usage (spack location)": [[4, "usage-spack-location"]], "Spack build-env": [[4, "spack-build-env"]], "Usage (spack build-env)": [[4, "usage-spack-build-env"]], "Options (spack build-env)": [[4, "options-spack-build-env"]], "Spack edit": [[4, "spack-edit"]], "Usage (spack edit)": [[4, "usage-spack-edit"]], "Spack load": [[4, "spack-load"]], "Usage (spack load)": [[4, "usage-spack-load"]], "Options (spack load)": [[4, "options-spack-load"]], "Testing": [[5, "testing"]], "Test packages (PR/MR/CI/CD)": [[5, "test-packages-pr-mr-ci-cd"]], "Pull Request Testing for spack-c2sm on GitHub": [[5, "pull-request-testing-for-spack-c2sm-on-github"]], "Welcome to C2SM Spack Documentation!": [[6, "welcome-to-c2sm-spack-documentation"]], "Contents:": [[6, null]], "Indices and tables": [[6, "indices-and-tables"]]}, "indexentries": {}})
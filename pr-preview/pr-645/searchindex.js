Search.setIndex({"docnames": ["C2SMGuidelines", "Install", "PrTesting", "QuickStart", "SpackChoice", "SpackCommands", "index"], "filenames": ["C2SMGuidelines.rst", "Install.rst", "PrTesting.rst", "QuickStart.rst", "SpackChoice.rst", "SpackCommands.rst", "index.rst"], "titles": ["C2SM Guidelines for Spack", "Spack Instance", "PR testing", "Quick Start", "Why was spack chosen by MeteoSwiss?", "Important Spack Commands", "Welcome to C2SM Spack Documentation!"], "terms": {"enabl": 0, "user": [0, 1, 4, 5], "piec": 0, "softwar": [0, 1, 4, 5, 6], "veri": [0, 4], "friendli": 0, "wai": [0, 3, 5], "allow": [0, 1, 5], "e": [0, 1, 3, 4, 5], "g": [0, 3, 4], "differ": [0, 4], "version": [0, 3, 4, 5], "specif": [0, 4, 5, 6], "same": [0, 3, 4], "simultan": 0, "without": 0, "have": [0, 4, 5], "manual": [0, 5], "download": [0, 1], "sourc": [0, 1, 5], "code": [0, 5], "thi": [0, 3, 4, 5], "come": [0, 4], "expens": 0, "potenti": 0, "lose": 0, "control": 0, "over": 0, "exact": 0, "being": [0, 5], "That": [0, 3, 5], "": [0, 1, 3, 4, 5], "why": [0, 6], "came": [0, 4], "up": [0, 1, 4, 6], "follow": [0, 1, 4, 5], "your": [0, 3, 4, 5], "librari": [0, 4], "execut": [0, 1, 3, 5], "There": [0, 1, 4, 5], "ar": [0, 1, 3, 4, 5], "two": 0, "possibl": [0, 1, 4, 5], "both": 0, "them": [0, 3, 4], "fine": 0, "some": [0, 4, 5], "specialti": 0, "one": [0, 4, 5], "need": [0, 3, 4, 5], "take": 0, "account": [0, 4], "everi": 0, "suffix": 0, "i": [0, 1, 2, 3, 4, 5, 6], "can": [0, 1, 3, 4, 5], "mean": [0, 2, 4], "branch": 0, "git": [0, 1, 3, 5], "repositori": [0, 1, 3], "out": [0, 4], "sever": 0, "defin": [0, 1, 5], "specifc": 0, "tag": [0, 3], "correspond": [0, 5], "hash": [0, 5], "hardcod": 0, "onli": [0, 1, 3, 4, 5], "last": 0, "item": 0, "list": [0, 2, 3, 6], "abov": [0, 1, 3, 4], "you": [0, 1, 3, 4, 5], "alwai": [0, 5], "fetch": [0, 5], "compil": [0, 1, 3, 4, 5], "The": [0, 1, 3, 4, 5], "other": [0, 4, 5], "lead": 0, "case": [0, 1, 4, 5], "head": [0, 5], "got": 0, "addit": [0, 5], "commit": [0, 1], "meantim": 0, "especi": [0, 5], "product": [0, 5], "import": [0, 4, 6], "now": 0, "which": [0, 1, 4, 5], "actual": [0, 5], "us": [0, 4, 5, 6], "varieti": 0, "cosmo": [0, 1, 2, 4, 5, 6], "ssh": 0, "github": [0, 1, 3], "com": [0, 1, 3], "org": [0, 3], "apngit": 0, "meteoswiss": [0, 3, 6], "apn": [0, 3], "c2smgit": 0, "rcm": 0, "master": [0, 3, 5], "get_full_repo": 0, "true": 0, "mch": [0, 1, 4, 5], "featur": [0, 5], "5": [0, 3, 4, 5], "09": 0, "three": 0, "avail": [0, 1, 5], "It": [0, 2, 3, 4, 5], "clear": 0, "result": 0, "all": [0, 1, 2, 3, 4, 5], "point": [0, 4, 5], "includ": [0, 4], "provid": [0, 1, 4], "info": [0, 1, 3, 6], "package_nam": 0, "note": 0, "yet": 0, "offer": 0, "soon": 0, "we": [0, 3, 4, 5], "thu": 0, "recommend": [0, 5], "devbuildcosmo": [0, 3, 6], "command": [0, 3, 6], "so": [0, 3, 4, 5], "long": [0, 5], "stori": 0, "short": 0, "valid": 0, "when": [0, 3, 4, 5], "In": [0, 1, 5], "order": [0, 1, 2, 5], "local": [0, 5, 6], "present": [0, 4], "contrari": 0, "v2": 0, "7": 0, "9": [0, 5], "etc": [0, 1, 4], "doe": [0, 5], "ani": [0, 1, 3, 4, 5], "effect": 0, "To": [0, 1, 2, 3, 4], "safe": 0, "mdev": 0, "copi": [0, 5], "after": [0, 5], "folder": [0, 2, 3, 5], "store": [0, 1], "per": 0, "default": [0, 3, 5], "under": [0, 1, 5], "scratch": [0, 5], "On": [0, 1], "piz": [0, 1], "daint": [0, 1, 2, 4, 6], "undergo": 0, "regular": 0, "cleanup": 0, "delet": [0, 5], "file": [0, 5, 6], "older": [0, 5], "than": 0, "30": 0, "dai": 0, "mai": [0, 1, 3, 4], "corrupt": 0, "intern": 0, "databas": 0, "unexpect": 0, "behaviour": 0, "overwrit": 0, "directori": [0, 5], "do": [0, 3, 5], "creat": [0, 1, 2, 4, 5], "config": [0, 5, 6], "yaml": [0, 1, 5], "specifi": [0, 1, 5], "an": [0, 1, 3, 4, 5], "regularli": [0, 4], "like": [0, 1, 4, 5], "project": [0, 1, 5], "install_tre": 0, "s903": 0, "juckerj": 0, "wipe": 0, "properli": 0, "abl": [0, 4, 5], "manag": [0, 4, 6], "mani": [0, 4], "configur": [0, 1, 3, 4, 5], "along": [0, 5], "binari": [0, 5], "current": [0, 3, 5], "shell": [0, 3], "variant": [0, 3, 5], "ha": [0, 3, 4], "correct": 0, "print": [0, 3, 5], "requir": [0, 1, 3, 4, 5], "later": 0, "stage": [0, 5], "sh": [0, 1, 3], "run_packag": 0, "env": [0, 1, 3, 6], "exampl": [0, 2, 3, 5], "output": [0, 5], "could": [0, 4], "look": 0, "export": 0, "library_path": 0, "opt": 0, "crai": 0, "pe": 0, "mpt": 0, "15": 0, "gni": 0, "mpich": 0, "pgi": [0, 5], "20": 0, "1": [0, 1, 3, 4, 5], "lib": 0, "eccod": [0, 5], "2": [0, 3, 4, 5], "19": [0, 5], "0": [0, 5], "ccigv3uvkdl5h3d2jtb6blxvvv4qsdpc": 0, "lib64": 0, "app": 0, "ue": 0, "xalt": 0, "xalt2": 0, "8": [0, 5], "10": 0, "ld_library_path": [0, 5], "gcc": [0, 3, 5], "papi": 0, "6": 0, "4": 0, "job": [0, 5], "1_2": 0, "86__g36b56f4": 0, "ari": 0, "grib_samples_path": 0, "definit": [0, 5], "egf6fp466u2cl3ckkmhpemzf4hz7loqr": 0, "cosmodefinit": 0, "sampl": 0, "grib_definition_path": 0, "share": 0, "prior": [0, 5], "rather": 0, "tailor": 0, "interac": 0, "instanc": [0, 3, 5, 6], "find": [0, 1, 3, 6], "complain": 0, "about": [0, 1, 3, 4], "spec": [0, 3, 6], "meet": 0, "line": [0, 3], "input": [0, 5], "For": [0, 5], "reason": [0, 3, 4], "avoid": [0, 5], "shouldn": 0, "t": [0, 3, 4, 5], "too": 0, "problemat": 0, "advis": 0, "from": [0, 3, 4, 5], "login": 0, "node": 0, "befor": [0, 1, 3, 5], "submit": 0, "inherit": 0, "submiss": 0, "time": [0, 1, 3, 4], "get": [1, 3, 4, 5], "clone": [1, 3, 5], "c2sm": [1, 3, 5], "its": [1, 3, 4, 5], "submodul": [1, 3], "depth": [1, 3], "shallow": [1, 3], "option": [1, 3, 4], "thei": [1, 4], "reduc": 1, "amount": 1, "data": 1, "recurs": [1, 3], "b": [1, 3], "dev_v0": [1, 3], "18": [1, 3], "http": [1, 3, 4], "tsa": [1, 2, 4, 5, 6], "arolla": 1, "setup": [1, 3], "automat": [1, 4], "detect": [1, 3, 5], "simpli": 1, "set": [1, 4, 5, 6], "thing": 1, "modul": [1, 5, 6], "preinstal": [1, 3], "packag": [1, 2, 4, 5, 6], "more": [1, 5], "Their": 1, "structur": [1, 5], "flag": 1, "load": [1, 3, 6], "prgenv": 1, "alreadi": [1, 5], "instal": [1, 3, 4, 6], "depend": [1, 4, 5], "name": [1, 2, 3, 4], "path": [1, 3, 5], "variabl": [1, 3], "should": [1, 3, 4], "onc": [1, 5], "main": [1, 4], "where": [1, 5], "thebinari": 1, "upstream": 1, "pre": 1, "g110": [1, 5], "repo": [1, 3], "preliminari": 1, "test": [1, 5, 6], "system": [1, 3, 4], "constant": 1, "chang": [1, 5], "cannot": 1, "stabil": 1, "therefor": [1, 3, 5], "weekli": 1, "jenkin": [1, 2, 5], "plan": [1, 5], "collect": 1, "fashion": 1, "subsequ": 1, "int2lm": [1, 2, 5], "icontool": 1, "icon": [1, 2, 6], "pass": 1, "anoth": 1, "publish": 1, "trigger": 1, "push": 1, "most": [1, 3, 4, 5], "recent": 1, "procedur": 1, "obtain": 1, "latest": [1, 3], "state": [1, 5], "our": [1, 4, 5, 6], "fast": 1, "care": 1, "accord": 1, "csc": [1, 4, 6], "date": 1, "upgrad": 1, "comment": 2, "launch": 2, "machin": [2, 4, 6], "No": 2, "irrelev": 2, "support": [2, 4], "balfrin": [2, 6], "spack": 3, "auto": 3, "forc": [3, 5], "argument": 3, "match": [3, 5], "sysconfig": 3, "probabl": [3, 4], "want": [3, 4, 5], "extern": 3, "pull": 3, "empti": 3, "cach": 3, "uninstal": [3, 5], "everyth": 3, "remov": [3, 5], "misc": 3, "rm": 3, "rf": 3, "inform": [3, 5], "queri": 3, "see": [3, 4, 5], "what": [3, 5], "would": [3, 5], "ask": 3, "ocean": 3, "unspecfi": 3, "concret": [3, 5], "valu": 3, "isn": [3, 4], "unspecifi": 3, "serv": 3, "tiebreak": 3, "locat": [3, 6], "dir": 3, "satisfi": 3, "restrict": 3, "run": [3, 5, 6], "assum": 3, "familiar": 3, "build": [3, 4, 6], "reccomend": 3, "done": [3, 4], "dev": [3, 6], "stop": [3, 5], "phase": [3, 5], "bash": [3, 4, 5], "nest": 3, "var": 3, "work": [3, 4, 5], "make": [3, 4], "infrastructur": 3, "exit": 3, "If": [3, 4, 5], "multipl": [3, 4, 5], "label": 3, "separ": 3, "identifi": [3, 5], "common": [3, 4], "document": [3, 5], "string": 3, "sit": 3, "activ": 3, "p": [3, 5], "env_nam": 3, "deactiv": 3, "sensit": 3, "doc": 3, "readthedoc": 3, "io": 3, "en": 3, "html": 3, "__": 3, "pipelin": 3, "root": [3, 5], "show": [3, 5], "log": 3, "error": 3, "also": [3, 4, 5], "end": 3, "treat": 3, "special": 3, "own": [3, 4, 5], "depencendi": 3, "c": [3, 5], "dycor": [3, 5], "live": 3, "installcosmo": [3, 6], "cosmo_target": [3, 5], "cpu": [3, 5], "gpu": [3, 4, 5], "apn_5": [3, 5], "09a": [3, 5], "mch1": [3, 5], "p1": [3, 5], "releas": 3, "workaround": 3, "refus": 3, "popul": 3, "someth": [3, 4], "touch": 3, "not_empti": 3, "question": 4, "try": 4, "answer": 4, "here": 4, "well": 4, "my": 4, "incomplet": 4, "hopefulli": 4, "give": 4, "decent": 4, "view": 4, "whole": 4, "topic": 4, "issu": 4, "hefti": 4, "just": [4, 5], "few": 4, "linux": [4, 5], "distribut": 4, "offici": [4, 5], "re": 4, "mostli": [4, 6], "hardwar": 4, "matter": 4, "due": [4, 5], "perform": [4, 5], "mpi": 4, "implement": 4, "model": 4, "problem": [4, 5], "isol": 4, "environ": [4, 5, 6], "quit": 4, "tricki": 4, "deal": 4, "part": 4, "process": 4, "edit": [4, 6], "makefil": 4, "usual": 4, "autom": 4, "regex": 4, "believ": 4, "often": 4, "lot": 4, "hpc": 4, "aren": 4, "don": [4, 5], "realli": 4, "script": [4, 6], "tri": 4, "becam": 4, "difficult": 4, "maintain": 4, "develop": [4, 5, 6], "possibli": 4, "hack": 4, "clean": [4, 5, 6], "enough": 4, "hackabl": 4, "relev": 4, "acceler": 4, "alon": 4, "kesch": 4, "collabor": 4, "These": 4, "rule": 4, "popular": 4, "solut": 4, "apt": 4, "pacman": 4, "rpm": 4, "still": 4, "left": 4, "fullfil": 4, "But": 4, "those": 4, "far": 4, "biggest": 4, "adopt": 4, "within": 4, "googl": 4, "first": [4, 5], "page": [4, 6], "domin": 4, "u": [4, 5], "depart": 4, "energi": 4, "aurora": 4, "exaflop": 4, "frontier": 4, "el": 4, "capitan": 4, "riken": 4, "fugaku": 4, "cern": 4, "epfl": 4, "fermilab": 4, "ch": 4, "comput": [4, 6], "strong": 4, "apart": 4, "viabl": 4, "sens": 4, "rest": 4, "industri": 4, "A": 4, "comparison": 4, "variou": 4, "tool": 4, "found": 4, "timelin": 4, "roughli": 4, "sometim": 4, "2018": 4, "valentin": 4, "hann": 4, "gave": 4, "summer": 4, "2019": 4, "evalu": 4, "determin": [4, 5], "best": 4, "similar": [4, 5], "novemb": 4, "elsa": 4, "start": [4, 6], "her": 4, "devop": 4, "internship": 4, "until": [4, 5], "2020": 4, "were": 4, "port": 4, "septemb": 4, "octob": 4, "migrat": 4, "happen": 4, "Of": 4, "cours": 4, "consum": 4, "frustrat": 4, "howev": [4, 5], "hard": 4, "while": 4, "encount": 4, "bug": 4, "awai": 4, "optim": 4, "unavoid": 4, "expect": [4, 5], "solv": 4, "unsolv": 4, "misus": 4, "fair": 4, "blame": 4, "becaus": 4, "complex": [4, 5], "contain": [4, 5], "bit": 4, "itself": 4, "willing": 4, "learn": 4, "ensur": 4, "right": 4, "bad": 4, "idea": 4, "magic": 4, "unfortun": 4, "realist": 4, "good": 4, "search": [5, 6], "v": 5, "rhel7": 5, "skylake_avx512": 5, "3": 5, "claw": 5, "cppdycor": 5, "debug": 5, "dycoretest": 5, "parallel": 5, "pollen": 5, "real_typ": 5, "doubl": 5, "serial": 5, "slave": 5, "verbos": 5, "float": 5, "07": 5, "p6": 5, "raw": 5, "format": 5, "prefix": 5, "p2": 5, "qh4lqyvz73zcm2emfwwhcfue6kkm3xyo": 5, "ssezzpu36dc4j5lc35rkytuieicoptfr": 5, "4h7b7x62dcpvrctghjv23jrpnkep4ela": 5, "6ijz5756a65p6wblxbr3enllmpdzcvh5": 5, "us5kk56wraktww7e543cxi4dbud2lalv": 5, "o3jtuao2gwrz7uwyekvxvr7ylltwnt4w": 5, "aejk4rps3es6o5trdwppzew3f2j37kl6": 5, "vkwywww3z52ttmlzzpn4df5jnr5paiw4": 5, "l52ikknglfrfolr462lc4ez6abulmph": 5, "bbjwypwllbba6nmkvronktzo2vt6k3dw": 5, "gnm6i4pya3lrscgdnvvzgt77bssbfcab": 5, "koaxr3hlillunjtywkh46vcpzgrarnxc": 5, "i72unz2dzlp4donztoi7kxbubj4kfqtw": 5, "rvqs2tqltwlohpkyedzwnjggtwtgu4li": 5, "i2hc4rhlhhapga6gheq3tcnbyrytadoi": 5, "kmrbrer2mlzz2rkn3ykhxr6h6glbwptn": 5, "tip": 5, "truncat": 5, "n": 5, "fill": 5, "python": 5, "usr": 5, "bin": 5, "install_dir": 5, "liner": 5, "kei": 5, "sinc": 5, "describ": 5, "target": 5, "check": 5, "how": 5, "chosen": [5, 6], "plu": 5, "your_machin": 5, "mach": 5, "section": 5, "detail": 5, "kept": 5, "add": 5, "keep": 5, "dure": 5, "might": 5, "attempt": 5, "request": 5, "wa": [5, 6], "circumv": 5, "host": 5, "reserv": 5, "recip": 5, "among": 5, "termin": 5, "top": 5, "level": 5, "skip": 5, "call": 5, "introduc": 5, "equal": 5, "overwritten": 5, "preced": 5, "testsuit": 5, "j": 5, "explicitli": 5, "number": 5, "select": 5, "mode": 5, "altern": 5, "decid": 5, "force_uninstal": 5, "dont": 5, "restag": 5, "partial": 5, "go": 5, "base": 5, "instead": 5, "notic": 5, "rebuilt": 5, "next": 5, "even": 5, "anytim": 5, "below": 5, "cd": [5, 6], "certain": 5, "complet": 5, "ignor": 5, "no_specyaml": 5, "clean_build": 5, "relat": 5, "mainli": 5, "useful": 5, "access": 5, "corespond": 5, "somewher": 5, "As": 5, "simplest": 5, "rpath": 5, "adjust": 5, "retriev": 5, "h": 5, "dump": 5, "screen": 5, "either": 5, "sourceabl": 5, "replac": 5, "interact": 5, "programm": 5, "filenam": 5, "open": 5, "editor": 5, "correspondig": 5, "py": 5, "directli": 5, "runtim": 5, "respect": 5, "deploi": 6, "supercomput": 6, "swiss": 6, "super": 6, "center": 6, "quick": 6, "updat": 6, "pr": 6, "mr": 6, "ci": 6, "dom": 6, "guidelin": 6, "index": 6}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"c2sm": [0, 6], "guidelin": 0, "spack": [0, 1, 4, 5, 6], "build": [0, 5], "instal": [0, 5], "dev": [0, 5], "chang": 0, "locat": [0, 5], "packag": [0, 3], "run": 0, "load": [0, 5], "environ": [0, 3], "script": 0, "instanc": 1, "machin": [1, 3, 5], "specif": 1, "config": 1, "file": 1, "dom": 1, "pr": [2, 3], "test": [2, 3], "quick": 3, "start": 3, "set": 3, "up": 3, "daint": 3, "tsa": 3, "balfrin": 3, "local": 3, "updat": 3, "clean": 3, "us": 3, "develop": 3, "mr": 3, "ci": 3, "cd": 3, "cosmo": 3, "icon": 3, "why": 4, "wa": 4, "chosen": 4, "meteoswiss": 4, "import": 5, "command": 5, "find": 5, "usag": 5, "option": 5, "process": 5, "list": 5, "info": 5, "spec": 5, "installcosmo": 5, "devbuildcosmo": 5, "env": 5, "edit": 5, "welcom": 6, "document": 6, "content": 6, "indic": 6, "tabl": 6}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.todo": 2, "sphinx": 57}, "alltitles": {"C2SM Guidelines for Spack": [[0, "c2sm-guidelines-for-spack"]], "Building": [[0, "building"]], "Spack install (C2SM Guidelines)": [[0, "spack-install-c2sm-guidelines"]], "Spack dev-build (C2SM Guidelines)": [[0, "spack-dev-build-c2sm-guidelines"]], "Installation": [[0, "installation"]], "Change location for package installations": [[0, "change-location-for-package-installations"]], "Running": [[0, "running"]], "Load run-environment of a package": [[0, "load-run-environment-of-a-package"]], "Spack in scripts": [[0, "spack-in-scripts"]], "Spack Instance": [[1, "spack-instance"]], "Machine specific config files": [[1, "machine-specific-config-files"]], "Spack instance on Dom": [[1, "spack-instance-on-dom"]], "PR testing": [[2, "pr-testing"]], "Quick Start": [[3, "quick-start"]], "Set up (Daint, Tsa, Balfrin)": [[3, "set-up-daint-tsa-balfrin"]], "Set up (local machines)": [[3, "set-up-local-machines"]], "Update": [[3, "update"]], "Clean": [[3, "clean"]], "Use packages": [[3, "use-packages"]], "Develop packages": [[3, "develop-packages"]], "Environments": [[3, "environments"]], "Test packages (PR/MR/CI/CD)": [[3, "test-packages-pr-mr-ci-cd"]], "COSMO": [[3, "cosmo"]], "ICON": [[3, "icon"]], "Why was spack chosen by MeteoSwiss?": [[4, "why-was-spack-chosen-by-meteoswiss"]], "Important Spack Commands": [[5, "important-spack-commands"]], "Spack find": [[5, "spack-find"]], "Usage (spack find)": [[5, "usage-spack-find"]], "Options (spack find)": [[5, "options-spack-find"]], "Machine processing (spack find)": [[5, "machine-processing-spack-find"]], "Spack list": [[5, "spack-list"]], "Usage (spack list)": [[5, "usage-spack-list"]], "Spack info": [[5, "spack-info"]], "Usage (spack info)": [[5, "usage-spack-info"]], "Spack spec": [[5, "spack-spec"]], "Usage (spack spec)": [[5, "usage-spack-spec"]], "Spack install": [[5, "spack-install"]], "Usage (spack install)": [[5, "usage-spack-install"]], "Options (spack install)": [[5, "options-spack-install"]], "Spack installcosmo": [[5, "spack-installcosmo"]], "Usage (spack installcosmo)": [[5, "usage-spack-installcosmo"]], "Options (spack installcosmo)": [[5, "options-spack-installcosmo"]], "Spack dev-build": [[5, "spack-dev-build"]], "Usage (spack dev-build)": [[5, "usage-spack-dev-build"]], "Options (spack dev-build)": [[5, "options-spack-dev-build"]], "Spack devbuildcosmo": [[5, "spack-devbuildcosmo"]], "Usage (spack devbuildcosmo)": [[5, "usage-spack-devbuildcosmo"]], "Options (spack devbuildcosmo)": [[5, "options-spack-devbuildcosmo"]], "Spack location": [[5, "spack-location"]], "Usage (spack location)": [[5, "usage-spack-location"]], "Spack build-env": [[5, "spack-build-env"]], "Usage (spack build-env)": [[5, "usage-spack-build-env"]], "Options (spack build-env)": [[5, "options-spack-build-env"]], "Spack edit": [[5, "spack-edit"]], "Usage (spack edit)": [[5, "usage-spack-edit"]], "Spack load": [[5, "spack-load"]], "Usage (spack load)": [[5, "usage-spack-load"]], "Options (spack load)": [[5, "options-spack-load"]], "Welcome to C2SM Spack Documentation!": [[6, "welcome-to-c2sm-spack-documentation"]], "Contents:": [[6, null]], "Indices and tables": [[6, "indices-and-tables"]]}, "indexentries": {}})